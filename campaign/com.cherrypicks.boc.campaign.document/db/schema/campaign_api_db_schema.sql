-- +---------------------------------------------------------
-- | MODEL       : BOC_CAMPAIGN
-- | AUTHOR      : KELVIN
-- | GENERATED BY: OPEN SYSTEM ARCHITECT
-- +---------------------------------------------------------
-- | WARNING     : REVIEW BEFORE EXECUTION
-- +---------------------------------------------------------

-- +---------------------------------------------------------
-- | DROP
-- +---------------------------------------------------------
DROP TABLE BOC_CAMPAIGN.USER_DEVICE_COUPON;
DROP TABLE BOC_CAMPAIGN.LANGUAGE;
DROP TABLE BOC_CAMPAIGN.CAMPAIGN_ACTION_LOG;
DROP TABLE BOC_CAMPAIGN.MERCHANT_LANG_MAP;
DROP TABLE BOC_CAMPAIGN.CAMPAIGN_COUPON_LANG_MAP;
DROP TABLE BOC_CAMPAIGN.CAMPAIGN_LANG_MAP;
DROP TABLE BOC_CAMPAIGN.COUPON_QUOTA;
DROP TABLE BOC_CAMPAIGN.CAMPAIGN_COUPON;
DROP TABLE BOC_CAMPAIGN.MERCHANT;
DROP TABLE BOC_CAMPAIGN.CAMPAIGN;
DROP TABLE BOC_CAMPAIGN.USER_ACTIVITY;
DROP TABLE BOC_CAMPAIGN.ACTIVITY_ADDRESS;
DROP TABLE BOC_CAMPAIGN.ACTIVITY_LANG_MAP;
DROP TABLE BOC_CAMPAIGN.ACTIVITY;
-- +---------------------------------------------------------
-- | CREATE
-- +---------------------------------------------------------

CREATE TABLE BOC_CAMPAIGN.CAMPAIGN
(
  ID BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),
  START_DATE TIMESTAMP,
  END_DATE TIMESTAMP,
  CAMPAIGN_TYPE INTEGER,
  PLAY_TYPE INTEGER,
  DISPLAY_ORDER INTEGER,
  CREATED_TIME TIMESTAMP,
  CREATED_BY VARCHAR(50),
  UPDATED_TIME TIMESTAMP,
  UPDATED_BY VARCHAR(50),
  IS_DELETED SMALLINT DEFAULT 0
)IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN;

CREATE TABLE BOC_CAMPAIGN.MERCHANT
(
  ID BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),
  MERCHANT_PHONE VARCHAR(200),
  MERCHANT_WEBPAGE VARCHAR(200),
  CREATED_TIME TIMESTAMP,
  CREATED_BY VARCHAR(50),
  UPDATED_TIME TIMESTAMP,
  UPDATED_BY VARCHAR(50),
  IS_DELETED SMALLINT DEFAULT 0
)IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN;

CREATE TABLE BOC_CAMPAIGN.CAMPAIGN_COUPON
(
  ID BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),
  CAMPAIGN_ID BIGINT,
  COUPON_TYPE INTEGER,
  COUPON_CODE VARCHAR(50),
  DISPLAY_ORDER INTEGER,
  START_TIME TIMESTAMP,
  END_TIME TIMESTAMP,
  EXPIRY_DATE TIMESTAMP,
  STATUS INTEGER,
  MAX_DISTRIBUTION_QUOTA INTEGER,
  MAX_REDEEM_QUOTA INTEGER,
  MAX_DISTRIBUTION_PRE_DEVICE INTEGER,
  MAX_REDEEM_PRE_DEVICE INTEGER,
  MERCHANT_ID BIGINT,
  GN_SUM INTEGER DEFAULT 0,
  RN_SUM INTEGER DEFAULT 0,
  CREATED_TIME TIMESTAMP,
  CREATED_BY VARCHAR(50),
  UPDATED_TIME TIMESTAMP,
  UPDATED_BY VARCHAR(50),
  IS_DELETED SMALLINT DEFAULT 0
)IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN;

CREATE TABLE BOC_CAMPAIGN.COUPON_QUOTA
(
  ID BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),
  COUPON_ID BIGINT,
  AREA_ID BIGINT,
  CAMPAIGN_ID BIGINT,
  START_DATE TIMESTAMP,
  STATUS INTEGER,
  QUOTA INTEGER,
  GN INTEGER DEFAULT 0,
  RN INTEGER DEFAULT 0,
  CREATED_TIME TIMESTAMP,
  CREATED_BY VARCHAR(50),
  UPDATED_TIME TIMESTAMP,
  UPDATED_BY VARCHAR(50),
  IS_CARRY_FOLLOW INTEGER,
  IS_DELETED SMALLINT DEFAULT 0
)IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN;

CREATE TABLE BOC_CAMPAIGN.CAMPAIGN_LANG_MAP
(
  ID BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),
  CAMPAIGN_ID BIGINT,
  CAMPAIGN_NAME VARCHAR(500),
  ICON VARCHAR(200),
  CREATED_TIME TIMESTAMP,
  CREATED_BY VARCHAR(50),
  UPDATED_TIME TIMESTAMP,
  UPDATED_BY VARCHAR(50),
  LANG_CODE VARCHAR(50),
  IS_DELETED SMALLINT DEFAULT 0
)IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN;

CREATE TABLE BOC_CAMPAIGN.CAMPAIGN_COUPON_LANG_MAP
(
  ID BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),
  COUPON_ID BIGINT,
  COUPON_NAME VARCHAR(200),
  COUPON_TITLE VARCHAR(1000),
  COUPON_CONTENT VARCHAR(2000),
  COUPON_DETAIL VARCHAR(2000),
  ICON VARCHAR(200),
  BANNER VARCHAR(200),
  T_AND_C VARCHAR(3000),
  CREATED_TIME TIMESTAMP,
  CREATED_BY VARCHAR(50),
  UPDATED_TIME TIMESTAMP,
  UPDATED_BY VARCHAR(50),
  LANG_CODE VARCHAR(50),
  IS_DELETED SMALLINT DEFAULT 0
)IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN;

CREATE TABLE BOC_CAMPAIGN.MERCHANT_LANG_MAP
(
  ID BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),
  MERCHANT_ID BIGINT,
  MERCHANT_NAME VARCHAR(200),
  MERCHANT_CONTENT VARCHAR(2000),
  MERCHANT_DETAIL VARCHAR(2000),
  ICON VARCHAR(200),
  BANNER VARCHAR(200),
  CREATED_TIME TIMESTAMP,
  CREATED_BY VARCHAR(50),
  UPDATED_TIME TIMESTAMP,
  UPDATED_BY VARCHAR(50),
  IS_DELETED SMALLINT DEFAULT 0,
  LANG_CODE VARCHAR(50)
)IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN;

CREATE TABLE BOC_CAMPAIGN.CAMPAIGN_ACTION_LOG
(
  ID BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),
  DEVICE_ID VARCHAR(200),
  USER_ID VARCHAR(200),
  DEVICE_OS VARCHAR(20),
  DEVICE_NUM VARCHAR(20),
  BANK_NAME VARCHAR(200),
  ACTION_TYPE INTEGER,
  CREATED_TIME TIMESTAMP,
  CREATED_BY VARCHAR(50),
  UPDATED_TIME TIMESTAMP,
  UPDATED_BY VARCHAR(50),
  IS_DELETED SMALLINT DEFAULT 0
)IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN;

CREATE TABLE BOC_CAMPAIGN.LANGUAGE
(
  ID BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),
  NAME VARCHAR(200),
  CODE VARCHAR(20),
  IS_DEFAULT INTEGER,
  CREATED_TIME TIMESTAMP,
  CREATED_BY VARCHAR(50),
  UPDATED_TIME TIMESTAMP,
  UPDATED_BY VARCHAR(50),
  IS_DELETED SMALLINT DEFAULT 0
)IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN;

CREATE TABLE BOC_CAMPAIGN.USER_DEVICE_COUPON
(
  ID BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),
  DEVICE_ID VARCHAR(200),
  USER_ID VARCHAR(200),
  COUPON_QUOTA_ID BIGINT,
  COUPON_ID BIGINT,
  ACTION_TYPE INTEGER,
  CREATED_TIME TIMESTAMP,
  CREATED_BY VARCHAR(50),
  UPDATED_TIME TIMESTAMP,
  UPDATED_BY VARCHAR(50),
  IS_DELETED SMALLINT DEFAULT 0
)IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN;

--+--------
--avtivity
--+--------
CREATE TABLE BOC_CAMPAIGN.ACTIVITY
(
  ID BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),
  START_DATE TIMESTAMP,
  END_DATE TIMESTAMP,
  STATUS SMALLINT,
  ACTIVITY_TYPE SMALLINT,
  CREATED_TIME TIMESTAMP,
  CREATED_BY VARCHAR(50),
  UPDATED_TIME TIMESTAMP,
  UPDATED_BY VARCHAR(50),
  IS_DELETED SMALLINT DEFAULT 0 
)IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN;

CREATE TABLE BOC_CAMPAIGN.ACTIVITY_LANG_MAP
(
  ID BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),
  ACTIVITY_ID BIGINT,
  ACTIVITY_NAME VARCHAR(200),
  ACTIVITY_TITLE VARCHAR(1000),
  ACTIVITY_DESC VARCHAR(2000),
  ACTION_TYPE SMALLINT,
  T_AND_C VARCHAR(3000),
  ICON VARCHAR(200),
  CREATED_TIME TIMESTAMP,
  CREATED_BY VARCHAR(50),
  UPDATED_TIME TIMESTAMP,
  UPDATED_BY VARCHAR(50),
  IS_DELETED SMALLINT DEFAULT 0,
   LANG_CODE VARCHAR(50)
)IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN;

CREATE TABLE BOC_CAMPAIGN.ACTIVITY_ADDRESS
(
  ID BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),
  ACTIVITY_ID BIGINT,
  NUMBER_OF_PEOPLE INTEGER,
  ADDRESS VARCHAR(2000),
  CREATED_TIME TIMESTAMP,
  CREATED_BY VARCHAR(50),
  UPDATED_TIME TIMESTAMP,
  UPDATED_BY VARCHAR(50),
  IS_DELETED SMALLINT DEFAULT 0 
)IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN;

CREATE TABLE BOC_CAMPAIGN.USER_ACTIVITY
(
  ID BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),
  USER_ID VARCHAR(200),
  ACTIVITY_ID BIGINT,
  ACTIVITY_ADDRESS_ID BIGINT,
  PARTICIPATION_TIME TIMESTAMP,
  NUM_OF_PEOPLE INTEGER,
  USER_NAME VARCHAR(200),
  USER_SEX SMALLINT,
  USER_PHONE VARCHAR(200),
  CREATED_TIME TIMESTAMP,
  CREATED_BY VARCHAR(50),
  UPDATED_TIME TIMESTAMP,
  UPDATED_BY VARCHAR(50),
  IS_DELETED SMALLINT DEFAULT 0 
)IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN;
-- +---------------------------------------------------------
-- | CREATE FK
-- +---------------------------------------------------------


ALTER TABLE BOC_CAMPAIGN.CAMPAIGN_LANG_MAP ADD CONSTRAINT FK_CAMPAIGN FOREIGN KEY (CAMPAIGN_ID) 
	REFERENCES BOC_CAMPAIGN.CAMPAIGN (ID) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
	ENFORCED 
	ENABLE QUERY OPTIMIZATION;

ALTER TABLE BOC_CAMPAIGN.CAMPAIGN_COUPON ADD CONSTRAINT FK_CAMPAIGN FOREIGN KEY (CAMPAIGN_ID) 
	REFERENCES BOC_CAMPAIGN.CAMPAIGN (ID) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
	ENFORCED 
	ENABLE QUERY OPTIMIZATION;

ALTER TABLE BOC_CAMPAIGN.CAMPAIGN_COUPON ADD CONSTRAINT FK_MERCHANT FOREIGN KEY (MERCHANT_ID) 
	REFERENCES BOC_CAMPAIGN.MERCHANT (ID) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
	ENFORCED 
	ENABLE QUERY OPTIMIZATION;

ALTER TABLE BOC_CAMPAIGN.MERCHANT_LANG_MAP ADD CONSTRAINT FK_MERCHANT FOREIGN KEY (MERCHANT_ID) 
	REFERENCES BOC_CAMPAIGN.MERCHANT (ID) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
	ENFORCED 
	ENABLE QUERY OPTIMIZATION;

ALTER TABLE BOC_CAMPAIGN.CAMPAIGN_COUPON_LANG_MAP ADD CONSTRAINT FK_CAMPAIGN_COUPON FOREIGN KEY (COUPON_ID) 
	REFERENCES BOC_CAMPAIGN.CAMPAIGN_COUPON (ID) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
	ENFORCED 
	ENABLE QUERY OPTIMIZATION;

ALTER TABLE BOC_CAMPAIGN.COUPON_QUOTA ADD CONSTRAINT FK_CAMPAIGN_COUPON FOREIGN KEY (COUPON_ID) 
	REFERENCES BOC_CAMPAIGN.CAMPAIGN_COUPON (ID) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
	ENFORCED 
	ENABLE QUERY OPTIMIZATION;

ALTER TABLE BOC_CAMPAIGN.USER_DEVICE_COUPON ADD CONSTRAINT FK_CAMPAIGN_COUPON FOREIGN KEY (COUPON_ID) 
	REFERENCES BOC_CAMPAIGN.CAMPAIGN_COUPON (ID) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
	ENFORCED 
	ENABLE QUERY OPTIMIZATION;

ALTER TABLE BOC_CAMPAIGN.USER_DEVICE_COUPON ADD CONSTRAINT FK_COUPON_QUOTA FOREIGN KEY (COUPON_QUOTA_ID) 
	REFERENCES BOC_CAMPAIGN.COUPON_QUOTA (ID) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
	ENFORCED 
	ENABLE QUERY OPTIMIZATION;
	
ALTER TABLE BOC_CAMPAIGN.ACTIVITY_LANG_MAP ADD CONSTRAINT FK_ACTIVITY FOREIGN KEY (ACTIVITY_ID) 
	REFERENCES BOC_CAMPAIGN.ACTIVITY (ID) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
	ENFORCED 
	ENABLE QUERY OPTIMIZATION;

ALTER TABLE BOC_CAMPAIGN.ACTIVITY_ADDRESS ADD CONSTRAINT FK_ACTIVITY FOREIGN KEY (ACTIVITY_ID) 
	REFERENCES BOC_CAMPAIGN.ACTIVITY (ID) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
	ENFORCED 
	ENABLE QUERY OPTIMIZATION;

ALTER TABLE BOC_CAMPAIGN.USER_ACTIVITY ADD CONSTRAINT FK_ACTIVITY FOREIGN KEY (ACTIVITY_ID) 
	REFERENCES BOC_CAMPAIGN.ACTIVITY (ID) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
	ENFORCED 
	ENABLE QUERY OPTIMIZATION;
	
ALTER TABLE BOC_CAMPAIGN.USER_ACTIVITY ADD CONSTRAINT FK_ACTIVITY_ADDRESS FOREIGN KEY (ACTIVITY_ADDRESS_ID) 
	REFERENCES BOC_CAMPAIGN.ACTIVITY_ADDRESS (ID) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
	ENFORCED 
	ENABLE QUERY OPTIMIZATION;
