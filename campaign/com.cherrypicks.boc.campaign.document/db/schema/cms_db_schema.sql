-- +---------------------------------------------------------
-- | MODEL       : BOC_CAMPAIGN
-- | AUTHOR      : KELVIN
-- | GENERATED BY: OPEN SYSTEM ARCHITECT
-- +---------------------------------------------------------
-- | WARNING     : REVIEW BEFORE EXECUTION
-- +---------------------------------------------------------

-- +---------------------------------------------------------
-- | DROP
-- +---------------------------------------------------------
DROP TABLE BOC_CAMPAIGN.SYSTEM_FUNCTION;
DROP TABLE BOC_CAMPAIGN.SYSTEM_ROLE;
DROP TABLE BOC_CAMPAIGN.SYSTEM_ROLE_FUNCTION_MAP;
DROP TABLE BOC_CAMPAIGN.SYSTEM_USER;
DROP TABLE BOC_CAMPAIGN.SYSTEM_USER_ROLE_MAP;

-- +---------------------------------------------------------
-- | CREATE
-- +---------------------------------------------------------
--
-- TABLE STRUCTURE FOR TABLE SYSTEM_FUNCTION
--
CREATE TABLE BOC_CAMPAIGN.SYSTEM_FUNCTION (
  ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 3, INCREMENT BY 1),
  CREATED_BY VARCHAR(45),
  CREATED_TIME TIMESTAMP,
  UPDATED_BY VARCHAR(45),
  UPDATED_TIME TIMESTAMP,
  FUNC_CODE VARCHAR(50),
  FUNC_DESC VARCHAR(100),
  FUNC_NAME VARCHAR(50),
  IS_DELETED SMALLINT DEFAULT 0
) IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN; 
--
-- TABLE STRUCTURE FOR TABLE SYSTEM_ROLE;
--
CREATE TABLE BOC_CAMPAIGN.SYSTEM_ROLE (
  ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 3, INCREMENT BY 1),
  CREATED_BY VARCHAR(45) ,
  CREATED_TIME TIMESTAMP ,
  UPDATED_BY VARCHAR(45) ,
  UPDATED_TIME TIMESTAMP ,
  ROLE_DESC VARCHAR(100) ,
  ROLE_NAME VARCHAR(50) ,
  IS_DELETED SMALLINT DEFAULT 0
) IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN ;
--
-- TABLE STRUCTURE FOR TABLE SYSTEM_ROLE_FUNCTION_MAP
--

CREATE TABLE BOC_CAMPAIGN.SYSTEM_ROLE_FUNCTION_MAP (
  ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 3, INCREMENT BY 1),
  CREATED_BY VARCHAR(45) ,
  CREATED_TIME TIMESTAMP ,
  UPDATED_BY VARCHAR(45) ,
  UPDATED_TIME TIMESTAMP ,
  FUNC_ID BIGINT NOT NULL,
  ROLE_ID BIGINT NOT NULL,
  IS_DELETED SMALLINT DEFAULT 0
) IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN ;
--
-- TABLE STRUCTURE FOR TABLE SYSTEM_USER
--
CREATE TABLE BOC_CAMPAIGN.SYSTEM_USER (
  ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 3, INCREMENT BY 1),
  CREATED_BY VARCHAR(45) ,
  CREATED_TIME TIMESTAMP ,
  UPDATED_BY VARCHAR(45) ,
  UPDATED_TIME TIMESTAMP ,
  USER_NAME VARCHAR(45) ,
  PASSWORD VARCHAR(255) ,
  MOBILE VARCHAR(15) ,
  EMAIL VARCHAR(255) ,
  STATUS INTEGER ,
  IS_DELETED SMALLINT DEFAULT 0
) IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN ; 


CREATE UNIQUE INDEX IT_CAMPAIGN.UQ_USER_NAME ON BOC_CAMPAIGN.SYSTEM_USER (USER_NAME ASC) ALLOW REVERSE SCANS;
--
-- TABLE STRUCTURE FOR TABLE SYSTEM_USER_ROLE_MAP
--

CREATE TABLE BOC_CAMPAIGN.SYSTEM_USER_ROLE_MAP (
  ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 3, INCREMENT BY 1),
  CREATED_BY VARCHAR(45) ,
  CREATED_TIME TIMESTAMP ,
  UPDATED_BY VARCHAR(45) ,
  UPDATED_TIME TIMESTAMP ,
  ROLE_ID BIGINT NOT NULL,
  USER_ID BIGINT NOT NULL,
  IS_DELETED SMALLINT DEFAULT 0 
) IN DT_CAMPAIGN INDEX IN IT_CAMPAIGN;

-- +---------------------------------------------------------
-- | CREATE PK and FK
-- +---------------------------------------------------------
ALTER TABLE BOC_CAMPAIGN.SYSTEM_FUNCTION ADD CONSTRAINT PK_SYSTEM_FUNCTION PRIMARY KEY (ID);
ALTER TABLE BOC_CAMPAIGN.SYSTEM_ROLE ADD CONSTRAINT PK_SYSTEM_ROLE PRIMARY KEY (ID);
ALTER TABLE BOC_CAMPAIGN.SYSTEM_ROLE_FUNCTION_MAP ADD CONSTRAINT PK_SYSTEM_ROLE_FUNCTION_MAP PRIMARY KEY (ID);
ALTER TABLE BOC_CAMPAIGN.SYSTEM_USER_ROLE_MAP ADD CONSTRAINT PK_SYSTEM_USER_ROLE_MAP PRIMARY KEY (ID);
ALTER TABLE BOC_CAMPAIGN.SYSTEM_USER ADD CONSTRAINT PK_SYSTEM_USER PRIMARY KEY (ID);

ALTER TABLE BOC_CAMPAIGN.SYSTEM_USER_ROLE_MAP ADD CONSTRAINT FK_SYSTEM_ROLE_S FOREIGN KEY (ROLE_ID) 
	REFERENCES BOC_CAMPAIGN.SYSTEM_ROLE (ID) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
	ENFORCED 
	ENABLE QUERY OPTIMIZATION; 

ALTER TABLE BOC_CAMPAIGN.SYSTEM_USER_ROLE_MAP ADD CONSTRAINT FK_SYSTEM_USER FOREIGN KEY (USER_ID) 
	REFERENCES BOC_CAMPAIGN.SYSTEM_USER (ID) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
	ENFORCED 
	ENABLE QUERY OPTIMIZATION;

ALTER TABLE BOC_CAMPAIGN.SYSTEM_ROLE_FUNCTION_MAP ADD CONSTRAINT FK_SYSTEM_FUNCTION FOREIGN KEY (FUNC_ID) 
	REFERENCES BOC_CAMPAIGN.SYSTEM_FUNCTION (ID) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
	ENFORCED 
	ENABLE QUERY OPTIMIZATION;

ALTER TABLE BOC_CAMPAIGN.SYSTEM_ROLE_FUNCTION_MAP ADD CONSTRAINT FK_SYSTEM_ROLE FOREIGN KEY (ROLE_ID) 
	REFERENCES BOC_CAMPAIGN.SYSTEM_ROLE (ID) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
	ENFORCED 
	ENABLE QUERY OPTIMIZATION;

-- +---------------------------------------------------------
-- | CREATE init data
-- +---------------------------------------------------------
-- SYSTEM_ROLE
INSERT INTO BOC_CAMPAIGN.SYSTEM_ROLE(ID, ROLE_NAME, ROLE_DESC, CREATED_BY, CREATED_TIME) VALUES(1, 'admin', 'super admin', 'system', current timestamp);

-- SYSTEM_FUNCTION
INSERT INTO BOC_CAMPAIGN.SYSTEM_FUNCTION(ID, FUNC_NAME, FUNC_CODE, CREATED_BY, CREATED_TIME) VALUES(1, 'System Role', 'SYSTEM_ROLE', 'system', current timestamp);
INSERT INTO BOC_CAMPAIGN.SYSTEM_FUNCTION(ID, FUNC_NAME, FUNC_CODE, CREATED_BY, CREATED_TIME) VALUES(2, 'System User', 'SYSTEM_USER', 'system', current timestamp);
INSERT INTO BOC_CAMPAIGN.SYSTEM_FUNCTION(ID, FUNC_NAME, FUNC_CODE, CREATED_BY, CREATED_TIME) VALUES(3, 'Hold Campaign', 'HOLD_CAMPAIGIN', 'system', current timestamp);
INSERT INTO BOC_CAMPAIGN.SYSTEM_FUNCTION(ID, FUNC_NAME, FUNC_CODE, CREATED_BY, CREATED_TIME) VALUES(6, 'Activity Management', 'ACTIVITY_MANAGEMENT', 'system', current timestamp);
INSERT INTO BOC_CAMPAIGN.SYSTEM_FUNCTION(ID, FUNC_NAME, FUNC_CODE, CREATED_BY, CREATED_TIME) VALUES(4, 'Activity Address', 'ACTIVITY_ADDRESS', 'system', current timestamp);
INSERT INTO BOC_CAMPAIGN.SYSTEM_FUNCTION(ID, FUNC_NAME, FUNC_CODE, CREATED_BY, CREATED_TIME) VALUES(5, 'Merchant Management', 'MERCHANT_MANAGEMENT', 'system', current timestamp);
INSERT INTO BOC_CAMPAIGN.SYSTEM_FUNCTION(ID, FUNC_NAME, FUNC_CODE, CREATED_BY, CREATED_TIME) VALUES(7, 'Merchant Lang Map', 'MERCHANT_LANG_MAP', 'system', current timestamp);
INSERT INTO BOC_CAMPAIGN.SYSTEM_FUNCTION(ID, FUNC_NAME, FUNC_CODE, CREATED_BY, CREATED_TIME) VALUES(8, 'Campaign_Coupon', 'CAMPAIGIN_COUPON', 'system', current timestamp);
-- SYSTEM_ROLE_FUNCTION_MAP
INSERT INTO BOC_CAMPAIGN.SYSTEM_ROLE_FUNCTION_MAP(ID, ROLE_ID, FUNC_ID, CREATED_BY, CREATED_TIME) VALUES(1, 1, 1, 'system', current timestamp);
INSERT INTO BOC_CAMPAIGN.SYSTEM_ROLE_FUNCTION_MAP(ID, ROLE_ID, FUNC_ID, CREATED_BY, CREATED_TIME) VALUES(2, 1, 2, 'system', current timestamp);
INSERT INTO BOC_CAMPAIGN.SYSTEM_ROLE_FUNCTION_MAP(ID, ROLE_ID, FUNC_ID, CREATED_BY, CREATED_TIME) VALUES(3, 1, 3, 'system', current timestamp);
INSERT INTO BOC_CAMPAIGN.SYSTEM_ROLE_FUNCTION_MAP(ID, ROLE_ID, FUNC_ID, CREATED_BY, CREATED_TIME) VALUES(4, 1, 4, 'system', current timestamp);
INSERT INTO BOC_CAMPAIGN.SYSTEM_ROLE_FUNCTION_MAP(ID, ROLE_ID, FUNC_ID, CREATED_BY, CREATED_TIME) VALUES(5, 1, 5, 'system', current timestamp);
INSERT INTO BOC_CAMPAIGN.SYSTEM_ROLE_FUNCTION_MAP(ID, ROLE_ID, FUNC_ID, CREATED_BY, CREATED_TIME) VALUES(6, 1, 6, 'system', current timestamp);
INSERT INTO BOC_CAMPAIGN.SYSTEM_ROLE_FUNCTION_MAP(ID, ROLE_ID, FUNC_ID, CREATED_BY, CREATED_TIME) VALUES(7, 1, 7, 'system', current timestamp);
INSERT INTO BOC_CAMPAIGN.SYSTEM_ROLE_FUNCTION_MAP(ID, ROLE_ID, FUNC_ID, CREATED_BY, CREATED_TIME) VALUES(8, 1, 8, 'system', current timestamp);
-- SYSTEM_USER
INSERT INTO BOC_CAMPAIGN.SYSTEM_USER(ID, CREATED_BY, CREATED_TIME, USER_NAME, PASSWORD, STATUS) VALUES(1, 'system', current timestamp, 'admin', '21232F297A57A5A743894A0E4A801FC3', 1);

-- SYSTEM_USER_ROLE_MAP
INSERT INTO BOC_CAMPAIGN.SYSTEM_USER_ROLE_MAP(ID, CREATED_BY, CREATED_TIME, USER_ID, ROLE_ID) VALUES(1, 'system', current timestamp, 1, 1);



--SYSTEM DATA
INSERT INTO BOC_CAMPAIGN.LANGUAGE(ID,NAME,CODE,IS_DEFAULT,CREATED_TIME,CREATED_BY,IS_DELETED) VALUES(1,'English','en-US',1,current timestamp,'system',0);
INSERT INTO BOC_CAMPAIGN.LANGUAGE(ID,NAME,CODE,IS_DEFAULT,CREATED_TIME,CREATED_BY,IS_DELETED) VALUES(2,'HongKong','zh-HK',0,current timestamp,'system',0);
INSERT INTO BOC_CAMPAIGN.LANGUAGE(ID,NAME,CODE,IS_DEFAULT,CREATED_TIME,CREATED_BY,IS_DELETED) VALUES(3,'Chinses','zh-CN',0,current timestamp,'system',0);


